@model ArtemisBanking.Application.Dtos.CreditCard.CreditCardDetailDTO
@{
    ViewData["Title"] = "Detalles de Tarjeta de Crédito";
}

<div class="ab-page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="ab-page-title mb-2">
                <i class="fas fa-credit-card me-2"></i>
                Detalle de Tarjeta
            </h1>
            <p class="ab-page-subtitle mb-0">
                <i class="fas fa-hashtag"></i>
                <span style="font-family: 'Courier New', monospace;">**** **** **** @Model.Ultimos4Digitos</span>
            </p>
        </div>
        <a asp-action="Index" class="ab-btn ab-btn-outline-primary">
            <i class="fas fa-arrow-left me-2"></i>
            Volver
        </a>
    </div>
</div>

<div class="ab-stats-grid mb-4">
    <div class="ab-stat-card success">
        <div class="ab-stat-header">
            <div class="ab-stat-icon">
                <i class="fas fa-chart-line"></i>
            </div>
        </div>
        <div class="ab-stat-label">Límite de Crédito</div>s
        <div class="ab-stat-value">RD$ @Model.LimiteCredito.ToString("N2")</div>
    </div>

    <div class="ab-stat-card danger">
        <div class="ab-stat-header">
            <div class="ab-stat-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
        </div>
        <div class="ab-stat-label">Deuda Actual</div>
        <div class="ab-stat-value">RD$ @Model.DeudaActual.ToString("N2")</div>
    </div>

    <div class="ab-stat-card info">
        <div class="ab-stat-header">
            <div class="ab-stat-icon">
                <i class="fas fa-chart-pie"></i>
            </div>
        </div>
        <div class="ab-stat-label">Crédito Disponible</div>
        <div class="ab-stat-value">RD$ @Model.CreditoDisponible.ToString("N2")</div>
    </div>

    <div class="ab-stat-card warning">
        <div class="ab-stat-header">
            <div class="ab-stat-icon">
                <i class="fas fa-calendar-alt"></i>
            </div>
        </div>
        <div class="ab-stat-label">Fecha de Expiración</div>
        <div class="ab-stat-value" style="font-family: 'Courier New', monospace;">@Model.FechaExpiracion</div>
    </div>
</div>

<div class="ab-card">
    <div class="ab-card-header">
        <h2 class="ab-card-title">
            <i class="fas fa-receipt me-2"></i>
            Historial de Consumos
        </h2>
    </div>

    <div class="ab-card-body">
        <div class="table-responsive">
            <table class="ab-table">
                <thead>
                    <tr>
                        <th><i class="fas fa-calendar me-1"></i> Fecha</th>
                        <th class="text-end"><i class="fas fa-dollar-sign me-1"></i> Monto</th>
                        <th><i class="fas fa-store me-1"></i> Comercio</th>
                        <th class="text-center"><i class="fas fa-info-circle me-1"></i> Estado</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Consumos != null && Model.Consumos.Any())
                    {
                        @foreach (var consumo in Model.Consumos)
                        {
                            <tr>
                                <td>
                                    @consumo.FechaConsumo.ToString("dd/MM/yyyy")
                                </td>
                                <td class="text-end fw-bold text-white">
                                    RD$ @consumo.Monto.ToString("N2")
                                </td>
                                <td>
                                    @if (consumo.Comercio == "AVANCE")
                                    {
                                        <span class="ab-badge ab-badge-warning">
                                            <i class="fas fa-money-bill-wave me-1"></i>
                                            AVANCE DE EFECTIVO
                                        </span>
                                    }
                                    else
                                    {
                                        <i class="fas fa-store text-white-50 me-1"></i>
                                        <span>@consumo.Comercio</span>
                                    }
                                </td>
                                <td class="text-center">
                                    @if (consumo.Estado == "APROBADO")
                                    {
                                        <span class="ab-badge ab-badge-success">
                                            <i class="fas fa-check-circle me-1"></i>
                                            Aprobado
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="ab-badge ab-badge-danger">
                                            <i class="fas fa-times-circle me-1"></i>
                                            Rechazado
                                        </span>
                                    }
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="4">
                                <div class="ab-empty-state">
                                    <div class="ab-empty-state-icon">
                                        <i class="fas fa-receipt"></i>
                                    </div>
                                    <h3 class="ab-empty-state-title">No hay consumos</h3>
                                    <p class="ab-empty-state-text">
                                        No hay consumos registrados para esta tarjeta.
                                    </p>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>